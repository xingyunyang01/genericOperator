package config

import (
	"encoding/base64"
	"log"

	"k8s.io/client-go/rest"
)

type K8sConfig struct {
}

func NewK8sConfig() *K8sConfig {
	return &K8sConfig{}
}

// 初始化k8s配置
func (*K8sConfig) K8sRestConfig() *rest.Config {
	caEncode := "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1URXlNekV6TURJeU0xb1hEVE15TVRFeU1ERXpNREl5TTFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT2ZzCkwvazNsZVhoaWFOVjI1ektjc3lab0VvODdRcWNyNzFaZXArcnlDcXdPZXp2OFhpZXY0N1RQYzVZYzNMWk01NWYKeVpSbGEyTFYxaUg0dnllRDBFTytHbDFtNVpjQUg1Sk5BYXhxTlV3NDZ0bWhHZ0xtaVcvWm5pckppc0NqSUttdgpjbG9JTXFUZVJudXExT3Q4cXB3WUdubER0dHNzcXByQTRkREtja01vSk5LZXZ1cENGL2VYN1cwZGRVYXY4SWVJCllYaEtRNlA1RnpYU0pmZGVpNVJMMXZRcERMNHE2NGVHUGNmTmVDTU1GcHZQSmYwQnNyNERtZDBNY1psRG1SSlEKWndKMlI1RGJCR0RHRUZtdVBtbkswdFdpS2lKZGVjTjJvZFBsbVFzR3dOcHlmM1FJUnZ3ZGw5QkRwL28ra0tBOQo4eW4wMGluaUpqN0hsMDdrSVk4Q0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZBc0pKZ0U4WkV0VFd1U1BUNjlWbElyVHRJVXpNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRlc4Mms2T09jb2Q2RWhtV1U1Ywp2dXBCMTVIMi9lNlJLZ3JYTC9Qbi9tQ0dLdFl6aU40Y0JmZndpZ2lvbVlJQUFMTnh6TjB5S001WHRWOSt1cFBSCkVRMlNBQzZxNGpqUTNYMU52VUx3Ymp1Vzc4MzhpR2pnZmFLYkFvekV4WFl1Vjh4WmJoQXAweURSTDBXb294OUEKQzNGSHlxUER4eGREUXp1eHExVmNsZUdMaW5FUUVYZkRXaExDSDFnTkVMODJBNXZPVVRYb3FRZlk3UHlUa3AzNgpDeHpLajB0bHVNZmRrUzl2a1cyVmorSVJLME13REpKRzR4djZ0eko3LyszM29iT0NKVlVHNlhFOExUYVpPeDhQCjlURHFHaksrVUFJSEhKT1hLTzd6K0dCaW1qTGQzSTZlU1ZUamh6RjZxZEl2Vm5HYWVZZWVRYU9rb1p5YzVFelYKd3pJPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
	caDecode, err := base64.StdEncoding.DecodeString(caEncode)
	if err != nil {
		log.Println(err)
	}

	tokenEncode := "ZXlKaGJHY2lPaUpTVXpJMU5pSXNJbXRwWkNJNkluRjFiMHczYjBaaFFUaE1aVTl2UTJSdk9FNXZTRk55WWpaelYyTm1kV3N0YjBGT1luTXdjWGxuTFVVaWZRLmV5SnBjM01pT2lKcmRXSmxjbTVsZEdWekwzTmxjblpwWTJWaFkyTnZkVzUwSWl3aWEzVmlaWEp1WlhSbGN5NXBieTl6WlhKMmFXTmxZV05qYjNWdWRDOXVZVzFsYzNCaFkyVWlPaUpyZFdKbExYTjVjM1JsYlNJc0ltdDFZbVZ5Ym1WMFpYTXVhVzh2YzJWeWRtbGpaV0ZqWTI5MWJuUXZjMlZqY21WMExtNWhiV1VpT2lKck9ITXRaR0Z6YUMxaFpHMXBiaTEwYjJ0bGJpMW1ZM0IwTkNJc0ltdDFZbVZ5Ym1WMFpYTXVhVzh2YzJWeWRtbGpaV0ZqWTI5MWJuUXZjMlZ5ZG1salpTMWhZMk52ZFc1MExtNWhiV1VpT2lKck9ITXRaR0Z6YUMxaFpHMXBiaUlzSW10MVltVnlibVYwWlhNdWFXOHZjMlZ5ZG1salpXRmpZMjkxYm5RdmMyVnlkbWxqWlMxaFkyTnZkVzUwTG5WcFpDSTZJalJsTnpVNVptSTFMVEl3WlRJdE5ERmpZeTFoTkdZNUxUQXhORGhpTnpaaE1UWXhaQ0lzSW5OMVlpSTZJbk41YzNSbGJUcHpaWEoyYVdObFlXTmpiM1Z1ZERwcmRXSmxMWE41YzNSbGJUcHJPSE10WkdGemFDMWhaRzFwYmlKOS5SMmpYM3JsQWZfdmNiMkdHd19KWm5UUWdsQWwyRlYyVG0tbVctLU05aTNmaGRJUi1TeTFlZ1lJdkpNVnJISjNMTENnTHduTnFMVTBJcno0b1FfRF9OcTdjMVJIVndwMXFwZ1kzb09iYWRjWFRab3l2cVhMbDhsdG5taS1hMW5mMHRlb2pvVDJlckZwcllEeVc1SWlWQ2JTUWNSWTN6Um9YMHlKbEl5YTdyLUdfRUx1Zm1rVXNUZDVFR1RUblBxSTkxMng4blkwd2lxZ0hhSjZsQlV4SDlRUFZISUl5TVNaUDVsX01IZzdvZDdSbEtMRXM0a2hoaG9zMmVveDYwYklFUG9oRDNiRUlTUDN6bDZnS3cyZTNBdk90THFOREhBNG9CREJ2dlQ3YUROOFFVNGdidDNIaXZrczJnaUdQMnpSSll0T1M3OW5YTlZ3Z1NON2NmY3JYaUE="
	tokenDecode, err := base64.StdEncoding.DecodeString(tokenEncode)
	if err != nil {
		log.Println(err)
	}

	tls := rest.TLSClientConfig{}
	tls.Insecure = false
	tls.CAData = caDecode

	config := &rest.Config{
		Host:            "https://192.168.226.130:6443",
		BearerToken:     string(tokenDecode),
		BearerTokenFile: "",
		TLSClientConfig: tls,
	}

	return config
}
